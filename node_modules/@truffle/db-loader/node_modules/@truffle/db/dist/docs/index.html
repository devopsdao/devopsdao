<!DOCTYPE html><html class="default"><head><meta charSet="utf-8"/><meta http-equiv="x-ua-compatible" content="IE=edge"/><title>@truffle/db</title><meta name="description" content="Documentation for @truffle/db"/><meta name="viewport" content="width=device-width, initial-scale=1"/><link rel="stylesheet" href="assets/style.css"/><link rel="stylesheet" href="assets/highlight.css"/><script async src="assets/search.js" id="search-script"></script></head><body><script>document.body.classList.add(localStorage.getItem("tsd-theme") || "os")</script><header><div class="tsd-page-toolbar"><div class="container"><div class="table-wrap"><div class="table-cell" id="tsd-search" data-base="."><div class="field"><label for="tsd-search-field" class="tsd-widget search no-caption">Search</label><input type="text" id="tsd-search-field"/></div><ul class="results"><li class="state loading">Preparing search index...</li><li class="state failure">The search index is not available</li></ul><a href="index.html" class="title">@truffle/db</a></div><div class="table-cell" id="tsd-widgets"><div id="tsd-filter"><a href="#" class="tsd-widget options no-caption" data-toggle="options">Options</a><div class="tsd-filter-group"><div class="tsd-select" id="tsd-filter-visibility"><span class="tsd-select-label">All</span><ul class="tsd-select-list"><li data-value="public">Public</li><li data-value="protected">Public/Protected</li><li data-value="private" class="selected">All</li></ul></div> <input type="checkbox" id="tsd-filter-inherited" checked/><label class="tsd-widget" for="tsd-filter-inherited">Inherited</label><input type="checkbox" id="tsd-filter-externals" checked/><label class="tsd-widget" for="tsd-filter-externals">Externals</label></div></div><a href="#" class="tsd-widget menu no-caption" data-toggle="menu">Menu</a></div></div></div></div><div class="tsd-page-title"><div class="container"><h1>@truffle/db </h1></div></div></header><div class="container container-main"><div class="row"><div class="col-8 col-content"><section class="tsd-panel tsd-comment"><div class="tsd-comment tsd-typography"><div class="lead">

<a href="#truffledb-api-documentation" id="truffledb-api-documentation" style="color: inherit; text-decoration: none;">
  <h1>@truffle/db API documentation</h1>
</a>
</div><div>
<a href="#introduction" id="introduction" style="color: inherit; text-decoration: none;">
  <h2>Introduction</h2>
</a>
<p><strong>@truffle/db</strong> tracks information about smart contracts and their
development histories. It organizes this information almost entirely in the
form of <strong>content-addressed, immutable resources</strong> and seeks to serve as a
<strong>complete system of record</strong>, suitable to perfectly reproduce prior builds
and to act as a single source of truth.</p>
<p>This system of record covers the full gamut of concepts related to smart
contract development, from source code to deployment. Among other features,
it includes mechanisms for tracking the continuity of a smart contract as it
is implemented and even as the network to which it&#39;s deployed experiences
a hard-fork. <strong>Blockchain data is not forgotten — neither should blockchain
metadata.</strong></p>
<p>At a high-level, this package provides a
<a href="https://graphql.org/">GraphQL</a> interface and stores data via one of
several persistence backends thanks to <a href="https://pouchdb.com/">PouchDB</a>.
Use of this package directly is intended mostly for other tools – end users
can find interfaces to @truffle/db by way of Truffle itself, e.g. with the
<code>truffle db serve</code> command that starts a GraphQL Playground HTTP server.</p>
<p>This documentation serves to organize the modules and namespaces included
in the package, both for tool developer reference and for continued work
on @truffle/db itself. (Disclaimer: as a result, this API documentation
may serve neither of these purposes well. Please reach out with questions
and/or to suggest helpful clarifications!)</p>
<p>Continue reading below for an overview and full index of this package&#39;s
exports.</p>
<hr>
<figure style="text-align: center">
<img
  src="media/images/example-query.png"
  alt="Example query"
  style="width: 85%" />
<figcaption style="font-size: small; font-style: italic">
<strong>Figure</strong>:
Example query for a project's <code>MagicSquare</code> contract
</figcaption>
</figure>

<hr>

<a href="#contents" id="contents" style="color: inherit; text-decoration: none;">
  <h2>Contents</h2>
</a>
<p>For quick reference, this documentation summary contains the following
headings:</p>
<ul>
<li><p><a href="#introduction">Introduction</a></p>
</li>
<li><p><a href="#contents">Contents</a></p>
</li>
<li><p><a href="#core-library-interface">Core library interface</a></p>
<ul>
<li><a href="#instantiating-truffledb">Instantiating @truffle/db</a></li>
<li><a href="#graphql-schema">GraphQL schema</a></li>
</ul>
</li>
<li><p><a href="#data-model">Data model</a></p>
<ul>
<li><a href="#structure">Structure</a></li>
<li><a href="#list-of-collections">List of collections</a></li>
</ul>
</li>
<li><p><a href="#other-interfaces">Other interfaces</a></p>
<ul>
<li><a href="#javascript---typescript-interface">JavaScript / TypeScript interface</a></li>
<li><a href="#network-abstraction">Network abstraction</a></li>
<li><a href="#truffle-project-abstraction">Truffle project abstraction</a></li>
<li><a href="#http-interface">HTTP interface</a></li>
</ul>
</li>
<li><p><a href="#additional-materials">Additional materials</a></p>
</li>
</ul>

<a href="#core-library-interface" id="core-library-interface" style="color: inherit; text-decoration: none;">
  <h2>Core library interface</h2>
</a>

<a href="#instantiating-truffledb" id="instantiating-truffledb" style="color: inherit; text-decoration: none;">
  <h3>Instantiating @truffle/db</h3>
</a>
<p>This package defines the primary <a href="index.html#connect"><code>connect()</code></a> function, which
returns an object adhering to the <a href="index.html#Db">Db</a> interface for given
<a href="#connectoptions">ConnectOptions</a>.
This <a href="index.html#Db">Db</a> interface defines the <code>async</code>
<a href="interfaces/Meta.Db.html#execute"><code>db.execute()</code></a>
method that accepts a GraphQL request and returns a GraphQL response.</p>

<a href="#graphql-schema" id="graphql-schema" style="color: inherit; text-decoration: none;">
  <h3>GraphQL schema</h3>
</a>
<p>@truffle/db makes its GraphQL schema available as the exported
<a href="modules/Graph.html#schema"><code>Graph.schema</code></a> variable, or view the SDL
details in the <a href="modules/Graph.html">Graph</a> namespace description.</p>

<a href="#data-model" id="data-model" style="color: inherit; text-decoration: none;">
  <h2>Data model</h2>
</a>

<a href="#structure" id="structure" style="color: inherit; text-decoration: none;">
  <h3>Structure</h3>
</a>
<p>Data is organized as collections of representations of key
concepts related to smart contract development. Each collection specifies:</p>
<ul>
<li>A collection name</li>
<li>A complete resource type (exported as
<a href="modules/Resources.html#Resource-10"><code>Resources.Resource&lt;&quot;&lt;collectionName&gt;&quot;&gt;</code></a>; for
retrieved records)</li>
<li>An input type (exported as
<a href="modules/Resources.html#Input"><code>Resources.Input&lt;&quot;&lt;collectionName&gt;&quot;&gt;</code></a>; for
new records)</li>
<li>A subset list of fields from its input type whose values strictly
compose to form a resource&#39;s content-addressable ID.</li>
<li>Whether its resources are mutable (<strong>note</strong>: currently, only
<code>&quot;projectNames&quot;</code> resources are mutable)</li>
<li>Whether its resources are named (meaning that resources of the same
and collection will be tracked by name, for continuity and easy lookup)</li>
</ul>

<a href="#list-of-collections" id="list-of-collections" style="color: inherit; text-decoration: none;">
  <h3>List of collections</h3>
</a>
<p>@truffle/db defines the following collections:</p>
<ul>
<li><code>&quot;bytecodes&quot;</code>
[<em>resource</em>: <a href="interfaces/DataModel.Bytecode.html">Bytecode</a>;
<em>input</em>: <a href="interfaces/DataModel.BytecodeInput.html">BytecodeInput</a>]</li>
<li><code>&quot;compilations&quot;</code>
[<em>resource</em>: <a href="interfaces/DataModel.Compilation.html">Compilation</a>;
<em>input</em>: <a href="interfaces/DataModel.CompilationInput.html">CompilationInput</a>]</li>
<li><code>&quot;contracts&quot;</code>
[<em><strong>named</strong></em>; <em>resource</em>: <a href="interfaces/DataModel.Contract.html">Contract</a>;
<em>input</em>: <a href="interfaces/DataModel.ContractInput.html">ContractInput</a>]</li>
<li><code>&quot;contractInstances&quot;</code>
[<em>resource</em>: <a href="interfaces/DataModel.ContractInstance.html">ContractInstance</a>;
<em>input</em>: <a href="interfaces/DataModel.ContractInstanceInput.html">ContractInstanceInput</a>]</li>
<li><code>&quot;nameRecords&quot;</code>
[<em>resource</em>: <a href="interfaces/DataModel.NameRecord.html">NameRecord</a>;
<em>input</em>: <a href="interfaces/DataModel.NameRecordInput.html">NameRecordInput</a>]</li>
<li><code>&quot;networks&quot;</code>
[<em><strong>named</strong></em>; <em>resource</em>: <a href="interfaces/DataModel.Network.html">Network</a>;
<em>input</em>: <a href="interfaces/DataModel.NetworkInput.html">NetworkInput</a>]</li>
<li><code>&quot;networkGenealogies&quot;</code>
[<em>resource</em>: <a href="interfaces/DataModel.NetworkGenealogy.html">NetworkGenealogy</a>;
<em>input</em>: <a href="interfaces/DataModel.NetworkGenealogyInput.html">NetworkGenealogyInput</a>]</li>
<li><code>&quot;projectNames&quot;</code>
[<em><strong>mutable</strong></em>; <em>resource</em>: <a href="interfaces/DataModel.ProjectName.html">ProjectName</a>;
<em>input</em>: <a href="interfaces/DataModel.ProjectNameInput.html">ProjectNameInput</a>]</li>
<li><code>&quot;projects&quot;</code>
[<em>resource</em>: <a href="interfaces/DataModel.Project.html">Project</a>;
<em>input</em>: <a href="interfaces/DataModel.ProjectInput.html">ProjectInput</a>]</li>
<li><code>&quot;sources&quot;</code>
[<em>resource</em>: <a href="interfaces/DataModel.Source.html">Source</a>;
<em>input</em>: <a href="interfaces/DataModel.SourceInput.html">SourceInput</a>]</li>
</ul>
<p>This list is not intended to be static; since @truffle/db is in early
release, it may make sense to add new collections / change relationships
between existing collections. Backwards compatibility is planned but not yet
guaranteed.</p>

<a href="#other-interfaces" id="other-interfaces" style="color: inherit; text-decoration: none;">
  <h2>Other interfaces</h2>
</a>

<a href="#javascript--typescript-interface" id="javascript--typescript-interface" style="color: inherit; text-decoration: none;">
  <h3>JavaScript / TypeScript interface</h3>
</a>
<p>This package exposes programmatic interfaces for working with
the resources listed above:</p>
<ul>
<li><p><a href="modules/Process.html#resources">Process.resources</a>, a set of four generator functions that encode
logic for storing and retrieving resources for a given <code>collectionName</code>.</p>
</li>
<li><p>[[Process.Run.forDb()]], to construct an <code>async</code> helper that facilitates
requests/responses from/to the above generator functions against a given
<a href="index.html#Db">Db</a> instance.</p>
</li>
<li><p><a href="index.html#generateId">generateId()</a>, to predict the ID for a given resource
input. This can be useful for determining how to query for additional
information about entities with known properties.</p>
</li>
</ul>
<p>In addition, please see the <a href="modules/Project.LoadCompile.Batch.html#Resources">Resources</a> module for handy helper types for
dealing with @truffle/db entities.</p>

<a href="#network-abstraction" id="network-abstraction" style="color: inherit; text-decoration: none;">
  <h3>Network abstraction</h3>
</a>
<p>Keeping track of blockchain networks is nontrivial if you want to handle
network forks/re-orgs. To accommodate this, @truffle/db models
blockchain networks as individual point-in-time slices at various historic
blocks. As a result, a single blockchain network (e.g., &quot;mainnet&quot;) can and
will comprise many disparate <a href="interfaces/DataModel.Network.html">DataModel.Network</a> resources, one for each
block previously added.</p>
<p>This approach preserves immutability but requires additional record-keeping
in order to provide the commonly-understood continuous view of a blockchain.
To maintain this continuity, @truffle/db defines the
<a href="interfaces/DataModel.NetworkGenealogy.html">DataModel.NetworkGenealogy</a> resource, each of which links two
<a href="interfaces/DataModel.Network.html">DataModel.Network</a> resources, stating that a given network is ancestor
to another. This collection of genealogy pairs is then used to compute a
sparse list of past historic blocks for a given latest network.</p>
<p>The process to populate @truffle/db with correct network data involves
alternately querying GraphQL and the underlying blockchain JSON-RPC.</p>
<p>This package provides the <a href="modules/Network.html">Network</a> abstraction to simplify this process.</p>
<details>
<summary>Example usage</summary>

<pre><code class="language-typescript"><span class="hl-0">import</span><span class="hl-1"> </span><span class="hl-0">type</span><span class="hl-1"> { </span><span class="hl-2">Provider</span><span class="hl-1"> } </span><span class="hl-0">from</span><span class="hl-1"> </span><span class="hl-3">&quot;web3/providers&quot;</span><span class="hl-1">;</span><br/><span class="hl-4">declare</span><span class="hl-1"> </span><span class="hl-4">const</span><span class="hl-1"> </span><span class="hl-5">provider</span><span class="hl-1">: </span><span class="hl-6">Provider</span><span class="hl-1">;</span><br/><br/><span class="hl-0">import</span><span class="hl-1"> { </span><span class="hl-2">connect</span><span class="hl-1">, </span><span class="hl-2">Network</span><span class="hl-1"> } </span><span class="hl-0">from</span><span class="hl-1"> </span><span class="hl-3">&quot;@truffle/db&quot;</span><span class="hl-1">;</span><br/><br/><span class="hl-4">const</span><span class="hl-1"> </span><span class="hl-5">db</span><span class="hl-1"> = </span><span class="hl-7">connect</span><span class="hl-1">({</span><br/><span class="hl-1">  </span><span class="hl-8">// ...</span><br/><span class="hl-1">});</span><br/><br/><span class="hl-4">const</span><span class="hl-1"> </span><span class="hl-5">network</span><span class="hl-1"> = </span><span class="hl-0">await</span><span class="hl-1"> </span><span class="hl-2">Network</span><span class="hl-1">.</span><span class="hl-7">initialize</span><span class="hl-1">({</span><br/><span class="hl-1">  </span><span class="hl-2">provider</span><span class="hl-1">,</span><br/><span class="hl-1">  </span><span class="hl-2">db:</span><span class="hl-1"> </span><span class="hl-7">connect</span><span class="hl-1">({</span><br/><span class="hl-1">    </span><span class="hl-8">// ...</span><br/><span class="hl-1">  }),</span><br/><span class="hl-1">  </span><span class="hl-2">network:</span><span class="hl-1"> { </span><span class="hl-2">name:</span><span class="hl-1"> </span><span class="hl-3">&quot;mainnet&quot;</span><span class="hl-1"> }</span><br/><span class="hl-1">});</span><br/><br/><span class="hl-0">await</span><span class="hl-1"> </span><span class="hl-2">network</span><span class="hl-1">.</span><span class="hl-7">includeBlocks</span><span class="hl-1">([</span><br/><span class="hl-1">  { </span><span class="hl-2">height:</span><span class="hl-1"> </span><span class="hl-9">10000000</span><span class="hl-1">, </span><span class="hl-2">hash:</span><span class="hl-1"> </span><span class="hl-3">&quot;0x...&quot;</span><span class="hl-1"> },</span><br/><span class="hl-1">  </span><span class="hl-8">// ...</span><br/><span class="hl-1">]);</span><br/><br/><span class="hl-4">const</span><span class="hl-1"> { </span><span class="hl-5">historicBlock</span><span class="hl-1"> } = </span><span class="hl-2">network</span><span class="hl-1">.</span><span class="hl-2">knownLatest</span><span class="hl-1">;</span>
</code></pre>
</details>


<a href="#truffle-project-abstraction" id="truffle-project-abstraction" style="color: inherit; text-decoration: none;">
  <h3>Truffle project abstraction</h3>
</a>
<p>This package also provides an abstraction to interface with other
Truffle data formats, namely <code>WorkflowCompileResult</code>, returned by
@truffle/workflow-compile, and the Truffle contract artifacts format,
defined by @truffle/contract-schema. This abstraction covers two classes:</p>
<ul>
<li><a href="classes/Project.Project-1.html">Project.Project</a> for operations that <strong>do not</strong> require a network
connection. Use function <a href="modules/Project.html#initialize"><code>Project.initialize()</code></a>
to create.</li>
<li><a href="classes/Project.ConnectedProject.html">Project.ConnectedProject</a> for operations that <strong>do</strong> require a
blockchain network. Use existing project abstraction&#39;s
<a href="classes/Project.Project-1.html#connect"><code>project.connect()</code></a> method to create.</li>
</ul>

<a href="#http-interface" id="http-interface" style="color: inherit; text-decoration: none;">
  <h3>HTTP interface</h3>
</a>
<p>This package exposes the <a href="index.html#serve"><code>serve()</code></a> function, which returns an
<a href="https://www.apollographql.com/docs/apollo-server/">Apollo Server</a>
instance, adherent to the
<a href="https://nodejs.org/api/http.html#http_class_http_server">Node.js <code>http.Server</code></a>
interface. This server runs
<a href="https://github.com/graphql/graphql-playground">GraphQL Playground</a> for the
browser and also accepts plain GraphQL requests.</p>
<p><em>(This is a handy way to explore @truffle/db, since it offers schema-aware
auto-completion and the ability to explore relationships between entities.)</em></p>

<a href="#additional-materials" id="additional-materials" style="color: inherit; text-decoration: none;">
  <h2>Additional materials</h2>
</a>
<p>This package listing contains other namespaces not mentioned above.
These are for internal use and not to be considered part of @truffle/db&#39;s
public interface.</p>
<p>For those curious about these internals, of particular note is the <a href="modules/Meta.html">Meta</a>
namespace, which houses underlying collections-agnostic logic for
integrating GraphQL and PouchDB.</p>
</div></div></section><section class="tsd-panel-group tsd-index-group"><h2>Index</h2><section class="tsd-panel tsd-index-panel"><div class="tsd-index-content"><section class="tsd-index-section"><h3>Primary</h3><ul class="tsd-index-list"><li class="tsd-kind-namespace"><a href="modules/DataModel.html" class="tsd-kind-icon">Data<wbr/>Model</a></li><li class="tsd-kind-namespace"><a href="modules/Graph.html" class="tsd-kind-icon">Graph</a></li><li class="tsd-kind-namespace"><a href="modules/Process.html" class="tsd-kind-icon">Process</a></li><li class="tsd-kind-namespace"><a href="modules/Resources.html" class="tsd-kind-icon">Resources</a></li></ul></section><section class="tsd-index-section"><h3>Other</h3><ul class="tsd-index-list"><li class="tsd-kind-namespace"><a href="modules/Network.html" class="tsd-kind-icon">Network</a></li><li class="tsd-kind-namespace"><a href="modules/Project.html" class="tsd-kind-icon">Project</a></li><li class="tsd-kind-type-alias"><a href="index.html#ConnectOptions" class="tsd-kind-icon">Connect<wbr/>Options</a></li><li class="tsd-kind-type-alias"><a href="index.html#Db" class="tsd-kind-icon">Db</a></li><li class="tsd-kind-function"><a href="index.html#connect" class="tsd-kind-icon">connect</a></li><li class="tsd-kind-function tsd-has-type-parameter"><a href="index.html#generateId" class="tsd-kind-icon">generate<wbr/>Id</a></li><li class="tsd-kind-function"><a href="index.html#serve" class="tsd-kind-icon">serve</a></li></ul></section><section class="tsd-index-section"><h3>Internal</h3><ul class="tsd-index-list"><li class="tsd-kind-namespace"><a href="modules/Meta.html" class="tsd-kind-icon">Meta</a></li><li class="tsd-kind-namespace"><a href="modules/Pouch.html" class="tsd-kind-icon">Pouch</a></li></ul></section></div></section></section><section class="tsd-panel-group tsd-member-group undefined"><h2>Other</h2><section class="tsd-panel tsd-member tsd-kind-type-alias"><a id="ConnectOptions" class="tsd-anchor"></a><h3 class="tsd-anchor-link">Connect<wbr/>Options<a href="#ConnectOptions" aria-label="Permalink" class="tsd-anchor-icon"><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-link" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"></path><path d="M10 14a3.5 3.5 0 0 0 5 0l4 -4a3.5 3.5 0 0 0 -5 -5l-.5 .5"></path><path d="M14 10a3.5 3.5 0 0 0 -5 0l-4 4a3.5 3.5 0 0 0 5 5l.5 -.5"></path></svg></a></h3><div class="tsd-signature tsd-kind-icon">Connect<wbr/>Options<span class="tsd-signature-symbol">:</span> <a href="modules/Meta.html" class="tsd-signature-type" data-tsd-kind="Namespace">Meta</a><span class="tsd-signature-symbol">.</span><a href="interfaces/Meta.ConnectOptions.html" class="tsd-signature-type" data-tsd-kind="Interface">ConnectOptions</a><span class="tsd-signature-symbol">&lt;</span><a href="modules/Resources.html" class="tsd-signature-type" data-tsd-kind="Namespace">Resources</a><span class="tsd-signature-symbol">.</span><a href="modules/Resources.html#Collections" class="tsd-signature-type" data-tsd-kind="Type alias">Collections</a><span class="tsd-signature-symbol">&gt;</span></div><aside class="tsd-sources"><ul><li>Defined in <a href="https://github.com/trufflesuite/truffle/blob/1fbb6b168/packages/db/src/system.ts#L46">packages/db/src/system.ts:46</a></li></ul></aside><div class="tsd-comment tsd-typography"><div class="lead">
<p>Options for connecting to @truffle/db</p>
</div><div><pre><code class="language-typescript"><span class="hl-4">type</span><span class="hl-1"> </span><span class="hl-6">ConnectOptions</span><span class="hl-1"> = {</span><br/><span class="hl-1">  </span><span class="hl-2">adapter</span><span class="hl-1">?:</span><br/><span class="hl-1">    | {</span><br/><span class="hl-1">        </span><span class="hl-2">name</span><span class="hl-1">: </span><span class="hl-3">&quot;couch&quot;</span><span class="hl-1">;</span><br/><span class="hl-1">        </span><span class="hl-2">settings</span><span class="hl-1">?: </span><span class="hl-6">Meta</span><span class="hl-1">.</span><span class="hl-6">Pouch</span><span class="hl-1">.</span><span class="hl-6">Adapters</span><span class="hl-1">.</span><span class="hl-6">Couch</span><span class="hl-1">.</span><span class="hl-6">DatabasesSettings</span><span class="hl-1">;</span><br/><span class="hl-1">      }</span><br/><span class="hl-1">    |</span><br/><span class="hl-1">        </span><span class="hl-2">name</span><span class="hl-1">: </span><span class="hl-3">&quot;memory&quot;</span><span class="hl-1">;</span><br/><span class="hl-1">        </span><span class="hl-2">settings</span><span class="hl-1">?: </span><span class="hl-6">Meta</span><span class="hl-1">.</span><span class="hl-6">Pouch</span><span class="hl-1">.</span><span class="hl-6">Adapters</span><span class="hl-1">.</span><span class="hl-6">Memory</span><span class="hl-1">.</span><span class="hl-6">DatabasesSettings</span><span class="hl-1">;</span><br/><span class="hl-1">      }</span><br/><span class="hl-1">    | {</span><br/><span class="hl-1">        </span><span class="hl-2">name</span><span class="hl-1">: </span><span class="hl-3">&quot;sqlite&quot;</span><span class="hl-1">;</span><br/><span class="hl-1">        </span><span class="hl-2">settings</span><span class="hl-1">?: </span><span class="hl-6">Meta</span><span class="hl-1">.</span><span class="hl-6">Pouch</span><span class="hl-1">.</span><span class="hl-6">Adapters</span><span class="hl-1">.</span><span class="hl-6">Sqlite</span><span class="hl-1">.</span><span class="hl-6">DatabasesSettings</span><span class="hl-1">;</span><br/><span class="hl-1">      }</span><br/><span class="hl-1">};</span>
</code></pre>
<p>See individual settings interfaces:</p>
<ul>
<li><a href="interfaces/Meta.Pouch.Adapters.Couch.DatabasesSettings.html">Meta.Pouch.Adapters.Couch.DatabasesSettings</a></li>
<li>[[Meta.Pouch.Adapters.Fs.DatabasesSettings]]</li>
<li><a href="interfaces/Meta.Pouch.Adapters.Memory.DatabasesSettings.html">Meta.Pouch.Adapters.Memory.DatabasesSettings</a></li>
<li><a href="interfaces/Meta.Pouch.Adapters.Sqlite.DatabasesSettings.html">Meta.Pouch.Adapters.Sqlite.DatabasesSettings</a></li>
</ul>
<p>Default adapter: <code>{ name: &quot;sqlite&quot; }</code></p>
<p>We recommend using only <code>&quot;sqlite&quot;</code> and <code>&quot;couch&quot;</code> at this time.</p>
</div></div></section><section class="tsd-panel tsd-member tsd-kind-type-alias"><a id="Db" class="tsd-anchor"></a><h3 class="tsd-anchor-link">Db<a href="#Db" aria-label="Permalink" class="tsd-anchor-icon"><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-link" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"></path><path d="M10 14a3.5 3.5 0 0 0 5 0l4 -4a3.5 3.5 0 0 0 -5 -5l-.5 .5"></path><path d="M14 10a3.5 3.5 0 0 0 -5 0l-4 4a3.5 3.5 0 0 0 5 5l.5 -.5"></path></svg></a></h3><div class="tsd-signature tsd-kind-icon">Db<span class="tsd-signature-symbol">:</span> <a href="modules/Meta.html" class="tsd-signature-type" data-tsd-kind="Namespace">Meta</a><span class="tsd-signature-symbol">.</span><a href="interfaces/Meta.Db.html" class="tsd-signature-type" data-tsd-kind="Interface">Db</a><span class="tsd-signature-symbol">&lt;</span><a href="modules/Resources.html" class="tsd-signature-type" data-tsd-kind="Namespace">Resources</a><span class="tsd-signature-symbol">.</span><a href="modules/Resources.html#Collections" class="tsd-signature-type" data-tsd-kind="Type alias">Collections</a><span class="tsd-signature-symbol">&gt;</span></div><aside class="tsd-sources"><ul><li>Defined in <a href="https://github.com/trufflesuite/truffle/blob/1fbb6b168/packages/db/src/resources/types.ts#L195">packages/db/src/resources/types.ts:195</a></li></ul></aside><div class="tsd-comment tsd-typography"><div class="lead">
<p>An instance of @truffle/db</p>
</div><div><p>Defines the <a href="interfaces/Meta.Db.html#execute"><code>db.execute()</code></a> method, which accepts
GraphQL requests and returns GraphQL responses.</p>
<p>See <a href="index.html#connect">connect()</a> for how to instantiate this interface.</p>
</div><dl class="tsd-comment-tags"><dt>example</dt><dd><pre><code class="language-typescript"><span class="hl-0">import</span><span class="hl-1"> </span><span class="hl-2">gql</span><span class="hl-1"> </span><span class="hl-0">from</span><span class="hl-1"> </span><span class="hl-3">&quot;graphql-tag&quot;</span><span class="hl-1">;</span><br/><span class="hl-0">import</span><span class="hl-1"> { </span><span class="hl-2">connect</span><span class="hl-1">, </span><span class="hl-2">Db</span><span class="hl-1"> } </span><span class="hl-0">from</span><span class="hl-1"> </span><span class="hl-3">&quot;@truffle/db&quot;</span><span class="hl-1">;</span><br/><br/><span class="hl-4">const</span><span class="hl-1"> </span><span class="hl-5">db</span><span class="hl-1">: </span><span class="hl-6">Db</span><span class="hl-1"> = </span><span class="hl-7">connect</span><span class="hl-1">({</span><br/><span class="hl-1">  </span><span class="hl-8">// ...</span><br/><span class="hl-1">});</span><br/><br/><span class="hl-4">const</span><span class="hl-1"> {</span><br/><span class="hl-1">  </span><span class="hl-2">project</span><span class="hl-1">: {</span><br/><span class="hl-1">    </span><span class="hl-2">contract</span><span class="hl-1">: {</span><br/><span class="hl-1">      </span><span class="hl-5">id</span><span class="hl-1">,</span><br/><span class="hl-1">      </span><span class="hl-5">abi</span><span class="hl-1">,</span><br/><span class="hl-1">      </span><span class="hl-5">processedSource</span><span class="hl-1">,</span><br/><span class="hl-1">      </span><span class="hl-5">callBytecode</span><br/><span class="hl-1">    }</span><br/><span class="hl-1">  }</span><br/><span class="hl-1">} = </span><span class="hl-0">await</span><span class="hl-1"> </span><span class="hl-2">db</span><span class="hl-1">.</span><span class="hl-7">execute</span><span class="hl-1">(</span><span class="hl-7">gql</span><span class="hl-3">`</span><br/><span class="hl-3">  query {</span><br/><span class="hl-3">    project(id: &quot;0x...&quot;) {</span><br/><span class="hl-3">      contract(name: &quot;MagicSquare&quot;) {</span><br/><span class="hl-3">        id</span><br/><span class="hl-3">        abi { json }</span><br/><span class="hl-3">        processedSource {</span><br/><span class="hl-3">          source { contents }</span><br/><span class="hl-3">          ast { json }</span><br/><span class="hl-3">        }</span><br/><span class="hl-3">        callBytecode {</span><br/><span class="hl-3">          bytes</span><br/><span class="hl-3">          linkReferences { name length offsets }</span><br/><span class="hl-3">          instructions { opcode programCounter pushData }</span><br/><span class="hl-3">        }</span><br/><span class="hl-3">      }</span><br/><span class="hl-3">    }</span><br/><span class="hl-3">  }</span><br/><span class="hl-3">`</span><span class="hl-1">);</span>
</code></pre>
</dd></dl></div></section><section class="tsd-panel tsd-member tsd-kind-function"><a id="connect" class="tsd-anchor"></a><h3 class="tsd-anchor-link">connect<a href="#connect" aria-label="Permalink" class="tsd-anchor-icon"><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-link" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"></path><path d="M10 14a3.5 3.5 0 0 0 5 0l4 -4a3.5 3.5 0 0 0 -5 -5l-.5 .5"></path><path d="M14 10a3.5 3.5 0 0 0 -5 0l-4 4a3.5 3.5 0 0 0 5 5l.5 -.5"></path></svg></a></h3><ul class="tsd-signatures tsd-kind-function"><li class="tsd-signature tsd-kind-icon">connect<span class="tsd-signature-symbol">(</span>options<span class="tsd-signature-symbol">?: </span><a href="index.html#ConnectOptions" class="tsd-signature-type" data-tsd-kind="Type alias">ConnectOptions</a><span class="tsd-signature-symbol">)</span><span class="tsd-signature-symbol">: </span><a href="index.html#Db" class="tsd-signature-type" data-tsd-kind="Type alias">Db</a></li></ul><ul class="tsd-descriptions"><li class="tsd-description"><aside class="tsd-sources"><ul><li>Defined in <a href="https://github.com/trufflesuite/truffle/blob/1fbb6b168/packages/db/src/index.ts#L283">packages/db/src/index.ts:283</a></li></ul></aside><div class="tsd-comment tsd-typography"><div class="lead">
<p>Instantiate @truffle/db for given <a href="index.html#ConnectOptions">ConnectOptions</a></p>
</div></div><h4 class="tsd-parameters-title">Parameters</h4><ul class="tsd-parameters"><li><h5><span class="tsd-flag ts-flagOptional">Optional</span> options: <a href="index.html#ConnectOptions" class="tsd-signature-type" data-tsd-kind="Type alias">ConnectOptions</a></h5></li></ul><h4 class="tsd-returns-title">Returns <a href="index.html#Db" class="tsd-signature-type" data-tsd-kind="Type alias">Db</a></h4></li></ul></section><section class="tsd-panel tsd-member tsd-kind-function tsd-has-type-parameter"><a id="generateId" class="tsd-anchor"></a><h3 class="tsd-anchor-link">generate<wbr/>Id<a href="#generateId" aria-label="Permalink" class="tsd-anchor-icon"><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-link" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"></path><path d="M10 14a3.5 3.5 0 0 0 5 0l4 -4a3.5 3.5 0 0 0 -5 -5l-.5 .5"></path><path d="M14 10a3.5 3.5 0 0 0 -5 0l-4 4a3.5 3.5 0 0 0 5 5l.5 -.5"></path></svg></a></h3><ul class="tsd-signatures tsd-kind-function tsd-has-type-parameter"><li class="tsd-signature tsd-kind-icon">generate<wbr/>Id<span class="tsd-signature-symbol">&lt;</span><span class="tsd-signature-type" data-tsd-kind="Type parameter">N</span><span class="tsd-signature-symbol">&gt;</span><span class="tsd-signature-symbol">(</span>collectionName<span class="tsd-signature-symbol">: </span><span class="tsd-signature-type" data-tsd-kind="Type parameter">N</span>, input<span class="tsd-signature-symbol">: </span><span class="tsd-signature-type">undefined</span><span class="tsd-signature-symbol"> | </span><a href="modules/Meta.Id.html#StrictIdInput" class="tsd-signature-type" data-tsd-kind="Type alias">StrictIdInput</a><span class="tsd-signature-symbol">&lt;</span><a href="modules/Resources.html" class="tsd-signature-type" data-tsd-kind="Namespace">Resources</a><span class="tsd-signature-symbol">.</span><a href="modules/Resources.html#Collections" class="tsd-signature-type" data-tsd-kind="Type alias">Collections</a><span class="tsd-signature-symbol">, </span><span class="tsd-signature-type" data-tsd-kind="Type parameter">N</span><span class="tsd-signature-symbol">&gt;</span><span class="tsd-signature-symbol"> | </span><a href="modules/Resources.html" class="tsd-signature-type" data-tsd-kind="Namespace">Resources</a><span class="tsd-signature-symbol">.</span><a href="modules/Resources.html#Input" class="tsd-signature-type" data-tsd-kind="Type alias">Input</a><span class="tsd-signature-symbol">&lt;</span><span class="tsd-signature-type" data-tsd-kind="Type parameter">N</span><span class="tsd-signature-symbol">&gt;</span><span class="tsd-signature-symbol">)</span><span class="tsd-signature-symbol">: </span><span class="tsd-signature-type">undefined</span><span class="tsd-signature-symbol"> | </span><span class="tsd-signature-type">string</span></li></ul><ul class="tsd-descriptions"><li class="tsd-description"><aside class="tsd-sources"><ul><li>Defined in <a href="https://github.com/trufflesuite/truffle/blob/1fbb6b168/packages/db/src/index.ts#L300">packages/db/src/index.ts:300</a></li></ul></aside><div class="tsd-comment tsd-typography"><div class="lead">
<p>Compute an ID for a given collection name and input. This accepts either
a full <a href="modules/Resources.html#Input"><code>Resources.Input&lt;&quot;&lt;collectionName&gt;&quot;&gt;</code></a>
representation or an object containing only the relevant subset of
<a href="modules/Resources.html#IdFields"><code>Resources.IdFields&lt;&quot;&lt;collectionName&gt;&quot;&gt;</code></a>.</p>
</div></div><h4 class="tsd-type-parameters-title">Type Parameters</h4><ul class="tsd-type-parameters"><li><h4>N<span class="tsd-signature-symbol"> extends </span><a href="modules/Resources.html" class="tsd-signature-type" data-tsd-kind="Namespace">Resources</a><span class="tsd-signature-symbol">.</span><a href="modules/Resources.html#CollectionName" class="tsd-signature-type" data-tsd-kind="Type alias">CollectionName</a></h4></li></ul><h4 class="tsd-parameters-title">Parameters</h4><ul class="tsd-parameters"><li><h5>collectionName: <span class="tsd-signature-type" data-tsd-kind="Type parameter">N</span></h5></li><li><h5>input: <span class="tsd-signature-type">undefined</span><span class="tsd-signature-symbol"> | </span><a href="modules/Meta.Id.html#StrictIdInput" class="tsd-signature-type" data-tsd-kind="Type alias">StrictIdInput</a><span class="tsd-signature-symbol">&lt;</span><a href="modules/Resources.html" class="tsd-signature-type" data-tsd-kind="Namespace">Resources</a><span class="tsd-signature-symbol">.</span><a href="modules/Resources.html#Collections" class="tsd-signature-type" data-tsd-kind="Type alias">Collections</a><span class="tsd-signature-symbol">, </span><span class="tsd-signature-type" data-tsd-kind="Type parameter">N</span><span class="tsd-signature-symbol">&gt;</span><span class="tsd-signature-symbol"> | </span><a href="modules/Resources.html" class="tsd-signature-type" data-tsd-kind="Namespace">Resources</a><span class="tsd-signature-symbol">.</span><a href="modules/Resources.html#Input" class="tsd-signature-type" data-tsd-kind="Type alias">Input</a><span class="tsd-signature-symbol">&lt;</span><span class="tsd-signature-type" data-tsd-kind="Type parameter">N</span><span class="tsd-signature-symbol">&gt;</span></h5></li></ul><h4 class="tsd-returns-title">Returns <span class="tsd-signature-type">undefined</span><span class="tsd-signature-symbol"> | </span><span class="tsd-signature-type">string</span></h4></li></ul></section><section class="tsd-panel tsd-member tsd-kind-function"><a id="serve" class="tsd-anchor"></a><h3 class="tsd-anchor-link">serve<a href="#serve" aria-label="Permalink" class="tsd-anchor-icon"><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-link" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"></path><path d="M10 14a3.5 3.5 0 0 0 5 0l4 -4a3.5 3.5 0 0 0 -5 -5l-.5 .5"></path><path d="M14 10a3.5 3.5 0 0 0 -5 0l-4 4a3.5 3.5 0 0 0 5 5l.5 -.5"></path></svg></a></h3><ul class="tsd-signatures tsd-kind-function"><li class="tsd-signature tsd-kind-icon">serve<span class="tsd-signature-symbol">(</span>options<span class="tsd-signature-symbol">?: </span><a href="index.html#ConnectOptions" class="tsd-signature-type" data-tsd-kind="Type alias">ConnectOptions</a><span class="tsd-signature-symbol">)</span><span class="tsd-signature-symbol">: </span><span class="tsd-signature-type">ApolloServer</span></li></ul><ul class="tsd-descriptions"><li class="tsd-description"><aside class="tsd-sources"><ul><li>Defined in <a href="https://github.com/trufflesuite/truffle/blob/1fbb6b168/packages/db/src/index.ts#L292">packages/db/src/index.ts:292</a></li></ul></aside><div class="tsd-comment tsd-typography"><div class="lead">
<p>Create an Apollo GraphQL server for @truffle/db for given <a href="index.html#ConnectOptions">ConnectOptions</a></p>
</div><div><p>See
<a href="https://www.apollographql.com/docs/apollo-server/">Apollo Server documentation</a>
for more information.</p>
</div></div><h4 class="tsd-parameters-title">Parameters</h4><ul class="tsd-parameters"><li><h5><span class="tsd-flag ts-flagOptional">Optional</span> options: <a href="index.html#ConnectOptions" class="tsd-signature-type" data-tsd-kind="Type alias">ConnectOptions</a></h5></li></ul><h4 class="tsd-returns-title">Returns <span class="tsd-signature-type">ApolloServer</span></h4></li></ul></section></section></div><div class="col-4 col-menu menu-sticky-wrap menu-highlight"><nav class="tsd-navigation primary"><ul><li class="current"><a href="index.html">Exports</a></li><li class=" tsd-kind-namespace"><a href="modules/DataModel.html">Data<wbr/>Model</a></li><li class=" tsd-kind-namespace"><a href="modules/Graph.html">Graph</a></li><li class=" tsd-kind-namespace"><a href="modules/Meta.html">Meta</a></li><li class=" tsd-kind-namespace"><a href="modules/Network.html">Network</a></li><li class=" tsd-kind-namespace"><a href="modules/Pouch.html">Pouch</a></li><li class=" tsd-kind-namespace"><a href="modules/Process.html">Process</a></li><li class=" tsd-kind-namespace"><a href="modules/Project.html">Project</a></li><li class=" tsd-kind-namespace"><a href="modules/Resources.html">Resources</a></li></ul></nav><nav class="tsd-navigation secondary menu-sticky"><ul><li class="tsd-kind-type-alias"><a href="index.html#ConnectOptions" class="tsd-kind-icon">Connect<wbr/>Options</a></li><li class="tsd-kind-type-alias"><a href="index.html#Db" class="tsd-kind-icon">Db</a></li><li class="tsd-kind-function"><a href="index.html#connect" class="tsd-kind-icon">connect</a></li><li class="tsd-kind-function tsd-has-type-parameter"><a href="index.html#generateId" class="tsd-kind-icon">generate<wbr/>Id</a></li><li class="tsd-kind-function"><a href="index.html#serve" class="tsd-kind-icon">serve</a></li></ul></nav></div></div></div><footer class="with-border-bottom"><div class="container"><h2>Settings</h2><p>Theme <select id="theme"><option value="os">OS</option><option value="light">Light</option><option value="dark">Dark</option></select></p></div></footer><div class="container tsd-generator"><p>Generated using <a href="https://typedoc.org/" target="_blank">TypeDoc</a></p></div><div class="overlay"></div><script src="assets/main.js"></script></body></html>